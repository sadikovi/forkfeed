(function(){var t,e=[].slice,n=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};t=function(){function t(){}return t.prototype.createElement=function(t,e,n,i,r){var o;return t?(o=document.createElement(t),n&&(o.className=n),e&&(o.id=e),i&&(o.innerHTML=i),r&&r.appendChild(o),o):!1},t.prototype.clear=function(t){return t?t.innerHTML="":void 0},t.prototype.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},t.prototype.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null},t.prototype.addClass=function(){var t,i,r,o,s;return r=arguments[0],i=2<=arguments.length?e.call(arguments,1):[],t=r.className.trim(),t=t?t.split(" "):[],o=t.concat(function(){var e,r,o;for(o=[],e=0,r=i.length;r>e;e++)s=i[e],s&&n.call(t,s)<0&&o.push(s);return o}()),r.className=o.join(" ")},t.prototype.removeClass=function(){var t,i,r,o;return r=arguments[0],i=2<=arguments.length?e.call(arguments,1):[],t=r.className.split(" "),r.className=function(){var e,r,s;for(s=[],e=0,r=t.length;r>e;e++)o=t[e],n.call(i,o)<0&&s.push(o);return s}().join(" ")},t.prototype.hasClass=function(t,e){return n.call(t.className.split(" "),e)>=0},t.prototype.quote=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})},t.prototype.unquote=function(t){return decodeURIComponent(t)},t.prototype.isArray=function(t){return Array.isArray(t)||"[object Array]"==={}.toString.call(t)},t.prototype.randomid=function(){return(""+Math.random()).split(".")[1]},t.prototype.jsonOrElse=function(t,e){var n,i;null==e&&(e=null);try{i=JSON.parse(t)}catch(r){n=r,i=e}return i},t.prototype.intOrElse=function(t,e){var n;return null==e&&(e=-1),n=parseInt(t,10),NaN!==n?n:e},t.prototype.humanReadableTime=function(t,e){var n,i,r,o;return null==e&&(e="en-nz"),o=[new Date,new Date(t)],r=o[0],n=o[1],i=(r.getTime()-n.getTime())/1e3,i>0&&60>i?"less than a minute ago":i>=60&&3600>i?Math.floor(i/60)+" minutes ago":i>=3600&&86400>i?Math.floor(i/60/60)+" hours ago":""+n.toLocaleString(e)},t.prototype.timestampToDate=function(t,e){var n;return null==e&&(e="en-nz"),n=new Date(t),""+n.toLocaleString(e)},t.prototype.humanReadableDiff=function(t){var e,n,i;return i=Math.floor(t/1e3),e=Math.floor(i/3600),n=Math.floor(i/60),e>0?e+"hrs "+n%60+"min":n>0?n+"min "+i%60+"sec":i+"sec ("+t+")"},t.prototype.windowParameters=function(){var t,e,n,i,r,o,s,u,a,l,p;if(!(window&&window.location&&window.location.search))throw new Error("Window.location is not set properly");for(o=null!=(p=window.location.search)?p.trim():void 0,t=function(){var t,n,i,r;for(i=o.split("&"),r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.split("=",2));return r}(),n={},a=0,l=t.length;l>a;a++)i=t[a],s=0===i[0].indexOf("?")?i[0].substring(1):i[0],r=this.unquote(s),u=i[1]?this.unquote(i[1]):null,n[r]=u;return n},t}(),null==this.util&&(this.util=new t)}).call(this),function(){var t;t=function(){function t(){}return t.prototype.sendrequest=function(t,e,n,i,r,o){var s,u,a;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onreadystatechange=function(){var t;return 4===a.readyState?200<=(t=a.status)&&300>t?"function"==typeof r?r(a.status,a.responseText):void 0:"function"==typeof o?o(a.status,a.responseText):void 0:void 0},a.open(t,e,!0);for(s in n)u=n[s],a.setRequestHeader(s,u);return a.send(i)},t.prototype.syncrequest=function(t,e,n,i){var r,o,s;s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),s.open(t,e,!1);for(r in n)o=n[r],s.setRequestHeader(r,o);return s.send(i)},t}(),null==this.loader&&(this.loader=new t)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(){this.parseMapForParent=e(this.parseMapForParent,this)}return t.prototype.createElement=function(t,e){var n;return n=document.createElement(t),e&&e.appendChild(n),n},t.prototype.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},t.prototype.parseMapForParent=function(t,e){var n,i,r,o,s,u;if(!t)return!1;if(r={type:"type",cls:"cls",id:"id",title:"title",href:"href",target:"target",src:"src",inputvalue:"inputvalue",inputtype:"inputtype",placeholder:"placeholder",optionselected:"optionselected",children:"children",text_last:"text_last",onclick:"onclick",onkeyup:"onkeyup",arialabel:"arialabel"},"nodeName"in t)e&&e.appendChild(t);else if(r.type in t)n=this.createElement(t[r.type],e),r.id in t&&(n.id=""+t[r.id]),r.cls in t&&(n.className=""+t[r.cls]),r.href in t&&(n.href=""+t[r.href]),r.target in t&&(n.target=""+t[r.target]),r.src in t&&(n.src=""+t[r.src]),r.inputvalue in t&&(n.value=""+t[r.inputvalue]),r.inputtype in t&&(n.type=""+t[r.inputtype]),r.placeholder in t&&(n.placeholder=""+t[r.placeholder]),r.optionselected in t&&(n.selected=t[r.optionselected]),r.arialabel in t&&n.setAttribute("aria-label",t[r.arialabel]),r.onclick in t&&t[r.onclick]&&this.addEventListener(n,"click",function(e){return t[r.onclick].call(this,e)}),r.onkeyup in t&&t[r.onkeyup]&&this.addEventListener(n,"keyup",function(e){return t[r.onkeyup].call(this,e)}),r.title in t&&(o=document.createTextNode(""+t[r.title]),r.children in t?(length in t||(t[r.children]=[t[r.children]]),r.text_last in t&&t[r.text_last]?t[r.children].push(o):t[r.children].unshift(o)):t[r.children]=[o]),r.children in t&&this.parseMapForParent(t[r.children],n);else for(s=0,u=t.length;u>s;s++)i=t[s],this.parseMapForParent(i,e);return n},t}(),null==this.mapper&&(this.mapper=new t)}.call(this),function(){var t,e;t=function(){function t(e,n,i,r,o,s){var u;if(this.elem=e,this.onDidFinishEdit=n,this.oktext=null!=i?i:"Save",this.canceltext=null!=r?r:"Cancel",this.placeholder=null!=o?o:"",this.displayvalue=null!=s?s:!0,!this.elem||this.elem.nodeType!==Node.ELEMENT_NODE||!this.hasDataAttribute(this.elem))throw new Error("Wrong element");if(this.assets={},u=[null,null],this.assets.texter=u[0],this.assets.trigger=u[1],this.discover(this.elem),!this.assets.texter||!this.assets.trigger)throw new Error("Insufficient structure");t._util.addEventListener(this.assets.trigger,"click",function(t){return function(e){return t.showPanel(),e.preventDefault()}}(this)),this.on=!1}return t.prototype.getAttribute=function(t){return t.getAttribute("data-attr")},t.prototype.hasDataAttribute=function(t){return"fast-editor"===this.getAttribute(t)},t.prototype.hasTriggerAttribute=function(t){return"fast-editor-trigger"===this.getAttribute(t)},t.prototype.hasTextAttribute=function(t){return"fast-editor-texter"===this.getAttribute(t)},t.prototype.discover=function(t){var e,n,i,r,o;if(!t||!t.childNodes)return!1;for(r=t.childNodes,o=[],n=0,i=r.length;i>n;n++)e=r[n],e&&e.nodeType===Node.ELEMENT_NODE?this.hasTriggerAttribute(e)?o.push(this.assets.trigger=e):this.hasTextAttribute(e)?o.push(this.assets.texter=e):o.push(this.discover(e)):o.push(void 0);return o},t.prototype.showPanel=function(n){return this.on?!1:(n=n||""+this.assets.texter.textContent,this.panel=new e(n,this.placeholder,this.oktext,this.canceltext),this.assets.texter.innerHTML="",this.assets.texter.appendChild(this.panel.html()),this.assets.trigger.style.display="none",t._util.addEventListener(this.panel.ok,"click",function(t){return function(e){var n;return n=t.panel.texter.value,"function"==typeof t.hidePanel&&t.hidePanel(n),"function"==typeof t.onDidFinishEdit&&t.onDidFinishEdit(!0,n),e.preventDefault()}}(this)),t._util.addEventListener(this.panel.ko,"click",function(t){return function(e){return"function"==typeof t.hidePanel&&t.hidePanel(),"function"==typeof t.onDidFinishEdit&&t.onDidFinishEdit(!1),e.preventDefault()}}(this)),this.on=!0)},t.prototype.hidePanel=function(t){var e;return this.on?(this.assets.texter.textContent=null!=(e=this.displayvalue?t:null)?e:this.panel.initvalue,this.panel=null,this.assets.trigger.style.display="",this.on=!1):!1},t}(),e=function(){function e(t,e,n,i){var r;this.initvalue=t,this.placeholder=null!=e?e:"",this.oktext=null!=n?n:"Save",this.canceltext=null!=i?i:"Cancel",this.initvalue=this.initvalue?this.initvalue.trim():"",r=[this.submit(),this.cancel(),this.input(this.initvalue)],this.ok=r[0],this.ko=r[1],this.texter=r[2]}return e.prototype.input=function(e){var n,i;return n=document.createElement("input"),n.setAttribute("placeholder",""+this.placeholder),i=["text",""+e],n.type=i[0],n.value=i[1],t._util.addClass(n,"form-control","short"),n},e.prototype.submit=function(){var e;return e=document.createElement("div"),e.innerHTML=""+this.oktext,t._util.addClass(e,"btn","btn-success"),e},e.prototype.cancel=function(){var e;return e=document.createElement("div"),e.innerHTML=""+this.canceltext,t._util.addClass(e,"btn"),e},e.prototype.html=function(){var e,n,i,r,o,s,u,a,l;for(r=document.createElement("div"),t._util.addClass(r,"breadcrumb"),n=document.createElement("div"),t._util.addClass(n,"section"),n.appendChild(this.texter),o=document.createElement("div"),t._util.addClass(o,"section"),o.appendChild(this.ok),e=document.createElement("div"),t._util.addClass(e,"section"),e.appendChild(this.ko),s=function(){var e;return e=document.createElement("div"),t._util.addClass(e,"separator"),e},l=[n,s(),o,s(),e],u=0,a=l.length;a>u;u++)i=l[u],r.appendChild(i);return r},e}(),t._util=this.util,null==this.FastEditor&&(this.FastEditor=t)}.call(this),function(){var t,e,n,i,r,o,s,u,a,l=function(t,e){function n(){this.constructor=t}for(var i in e)p.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;u=this.loader,a=this.util,t=function(){function t(){}return t.prototype.doRequest=function(t,e,n,i,r){var o,s,u;return o=t.toLowerCase(),r&&"get"===o?(i=i+"?"+function(){var t;t=[];for(s in r)u=r[s],t.push(a.quote(s)+"="+a.quote(u));return t}().join("&"),r=null):"post"===o&&(r=JSON.stringify(r)),"function"==typeof e&&e(),loader.sendrequest(o,i,{},r,function(t,e){var i;return i=util.jsonOrElse(e),"function"==typeof n?n(!!i,i):void 0},function(t,e){var i;return i=util.jsonOrElse(e),"function"==typeof n?n(!1,i):void 0})},t.prototype.doGet=function(t,e,n,i){return null==i&&(i=null),this.doRequest("get",t,e,n,i)},t.prototype.doPost=function(t,e,n,i){return this.doRequest("post",t,e,n,i)},t}(),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.requestStatus=function(t,e){return this.doGet(t,e,"/api/v1/spark/status",null)},e}(t),null==this.StatusApi&&(this.StatusApi=r),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.breadcrumbs=function(t,e,n){return this.doGet(e,n,"/api/v1/file/breadcrumbs",{path:""+t})},e.prototype.files=function(t,e,n){return this.doGet(e,n,"/api/v1/file/list",{path:t})},e}(t),null==this.FilelistApi&&(this.FilelistApi=e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.get=function(t,e,n,i){var r;return r={status:""+t,limit:""+e},this.doGet(n,i,"/api/v1/job/list",r)},e.prototype.close=function(t,e,n){return this.doGet(e,n,"/api/v1/job/close",{jobid:""+t})},e.prototype.getJob=function(t,e,n){return this.doGet(e,n,"/api/v1/job/get",{jobid:""+t})},e.prototype.submit=function(t,e,n){return this.doPost(e,n,"/api/v1/job/submit",t)},e}(t),null==this.JobApi&&(this.JobApi=n),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.show=function(t,e){return this.doGet(t,e,"/api/v1/template/list")},e.prototype["delete"]=function(t,e,n){return this.doGet(e,n,"/api/v1/template/delete",{templateid:""+t})},e.prototype.create=function(t,e,n){return this.doPost(e,n,"/api/v1/template/create",t)},e}(t),null==this.TemplateApi&&(this.TemplateApi=o),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.readFromStart=function(t,e,n,i,r){var o;return o={jobid:""+t,type:""+e,page:""+n},this.doGet(i,r,"/api/v1/file/log",o)},e}(t),null==this.LogApi&&(this.LogApi=i),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.submit=function(t,e,n){return this.doPost(e,n,"/api/v1/timetable/create",t)},e.prototype.list=function(t,e,n,i){var r;return r={includejobs:""+t,status:""+e},this.doGet(n,i,"/api/v1/timetable/list",r)},e.prototype.get=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/get",{id:""+t})},e.prototype.pause=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/pause",{id:""+t})},e.prototype.resume=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/resume",{id:""+t})},e.prototype.cancel=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/cancel",{id:""+t})},e}(t),null==this.TimetableApi&&(this.TimetableApi=s)}.call(this);